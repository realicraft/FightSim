/*
Valid 'NBT' data:
potion_eff: effect id, effect length (turns)
enchant: enchant id, enchant level
desc_append: string to append

Future 'NBT' data:
name_color: color as a string*/

// [id, count, {nbt_name: [nbt_conts]}]
var inventoryList = {
    "realicraft": [
        [
            [43,1,{}],[184,1,{}],[99,6,{}],[51,16,{}],[68,10,{}],[37,6,{}],
            [371,2,{}],[76,3,{}],[190,2,{}],[44,1,{}],[413,1,{}],[398,2,{}]
        ],[
            [369,5,{}],[404,5,{}],[422,1,{}],[234,2,{}],[235,2,{}],[236,2,{}],
            [238,1,{}],[392,1,{}],[187,1,{}],[400,3,{}],[70,1,{}],[433,1,{}]
        ] // queued: goldfish sticker
    ],
    "SausageMcSauce": [[
            [240,1,{}],[244,1,{}],[351,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
        ],[
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}]
        ]
    ],
    "CatsUnited": [[
            [240,1,{}],[93,8,{}],[351,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
        ],[
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}]
        ]
    ],
    "Squirrelflight": [[
            [240,1,{}],[245,1,{}],[351,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
        ],[
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}]
        ]
    ],
    "IncendiaryGaming": [[
            [32,1,{}],[51,24,{}],[36,5,{}],[249,1,{}],[246,1,{}],[46,3,{}],
            [68,8,{}],[351,1,{}],[234,2,{}],[235,2,{}],[236,2,{}],[238,1,{}],
        ],[
            [369,6,{}],[37,5,{}],[400,6,{}],[75,3,{}],[76,2,{}],[383,2,{}],
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}]
        ]
    ],
    "Byron_Inc_TBG": [[
            [306,1,{}],[25,1,{}],[68,10,{}],[371,46,{}],[37,7,{}],[75,6,{}],
            [23,1,{}],[51,18,{}],[76,4,{}],[400,8,{}],[12,4,{}],[93,5,{}],
        ],[
            [133,6,{}],[62,6,{}],[72,1,{}],[319,1,{}],[383,1,{}],[399,2,{}],
            [45,4,{}],[87,6,{}],[398,3,{}],[404,2,{}],[187,2,{}],[360,1,{}]
        ]
    ],
    "cheesyfriedeggs": [[
            [35,13,{}],[38,1,{}],[46,4,{}],[47,4,{}],[10,1,{}],[143,1,{}],
            [36,2,{}],[383,2,{}],[247,1,{}],[51,4,{}],[254,2,{}],[68,3,{}],
        ],[
            [369,3,{}],[37,2,{}],[75,2,{}],[234,1,{}],[235,2,{}],[236,1,{}],
            [238,1,{}],[249,1,{}],[241,1,{}],[76,1,{}],[400,2,{}],[134,32,{}]
    ]
    ],
    "solitare": [[
            [46,3,{}],[351,1,{}],[51,7,{}],[68,4,{}],[37,4,{}],[369,4,{}],
            [400,3,{}],[22,1,{}],[23,1,{}],[24,1,{}],[47,6,{}],[202,5,{}],
        ],[
            [234,2,{}],[235,7,{}],[236,2,{}],[238,1,{}],[241,1,{}],[138,5,{}],
            [64,11,{}],[195,6,{}],[75,2,{}],[76,1,{}],[0,1,{}],[0,1,{}]
        ]
    ],
    "Faressain": [[
            [39,1,{}],[240,1,{}],[36,10,{}],[351,1,{}],[0,1,{}],[0,1,{}],
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
        ],[
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}]
        ]
    ],
    "LeopardyLeaf": [[
            [36,3,{}],[37,1,{}],[240,1,{}],[20,1,{}],[351,1,{}],[0,1,{}],
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
        ],[
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}]
        ]
    ],
    "gilbert_given_TBG": [[
            [44,6,{}],[46,9,{}],[45,4,{}],[154,1,{}],[9,1,{}],[51,7,{}],
            [30,1,{}],[18,1,{}],[89,3,{}],[254,5,{}],[248,1,{desc_append:["5/50"]}],[0,1,{}],
        ],[
            [402,2,{}],[0,1,{}],[37,2,{}],[75,2,{}],[0,1,{}],[400,2,{}],
            [383,2,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}]
        ]
    ],
    "TwilightSeleneMisty": [[
            [35,10,{}],[23,1,{}],[31,1,{}],[9,1,{}],[47,8,{}],[0,1,{}],
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
        ],[
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}]
        ]
    ],
    "Luigis_Pizza": [[
            [108,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
        ],[
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}]
        ]
    ],
    "<abbr title=\"Dark Necromancer Kitty\">D. N. Kitty</abbr>": [[
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
        ],[
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}]
        ]
    ],
    "SAVVYSCLUTTER": [[
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
        ],[
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}]
        ]
    ],
    "Bobby": [[
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
        ],[
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}]
        ]
    ],
    "TonyBrown148": [[
            [51,4,{}],[68,2,{}],[369,2,{}],[37,1,{}],[75,1,{}],[76,1,{}],
            [400,2,{}],[44,2,{}],[46,13,{}],[45,4,{}],[224,1,{}],[0,1,{}],
        ],[
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],
            [0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}],[0,1,{}]
        ]
    ],
};

var generate_row = function(j) {
    invenRow2 = "<span class='icon ";
    if ("enchant" in j[2]) {invenRow2 += "enchanted "}
    invenRow2 += equiplist[j[0]][1];
    invenRow2 += "' onmouseover='tt(";
    invenRow2 += j[0];
    for (k in j[2]) { // check for first argument data (enchants)
        if (k == "enchant") {
            if (!didFirstArg) {invenRow2 += ",\""}
            else {invenRow2 += "<br />"}
            didFirstArg = true
            invenRow2 += enchantlist[j[2]["enchant"][0]][0] + " " + j[2]["enchant"][1]
        }
        else if (k == "potion_eff") {
            if (!didFirstArg) {invenRow2 += ",\""}
            else {invenRow2 += "<br />"}
            didFirstArg = true
            invenRow2 += effectlist[j[2]["potion_eff"][0]][0] + " (" + j[2]["potion_eff"][1] + " turn"
            if (j[2]["potion_eff"][1] == 1) {} else {invenRow2 += "s"}
            invenRow2 += ")"
        }
    }
    if (didFirstArg) {invenRow2 += "\""}
    else {invenRow2 += ",\"\""}
    for (k in j[2]) { // check for second argument data (description appends)
        if (k == "desc_append") {
            if (!didSecondArg) {invenRow2 += ",\""}
            didSecondArg = true
            invenRow2 += j[2]["desc_append"][0]
        }
    }
    if (didSecondArg) {invenRow2 += "\""}
    else {invenRow2 += ",\"\""}
    invenRow2 += ");' onmouseout='nt();'></span>";
    return invenRow2
}

var invenRows = "";
var invenRow = "";
var didFirstArg = false
var didSecondArg = false
for (var i in inventoryList) {
    invenRow = "<tr><td class='inv_user' rowspan='2'>";
    invenRow += i;
    invenRow += "</td><td class='inv_space'></td>";
    for (var j of inventoryList[i][0]) {
        didFirstArg = false
        didSecondArg = false
        invenRow += "<td class='inv_item'>";
        if (j[0] == 0) {}
        else {
            invenRow += generate_row(j)
        };
        if (j[1] == 1) {}
        else {
            invenRow += "<span>"
            invenRow += j[1]
            invenRow += "</span>"
        };
        invenRow += "</td>"
    };
    invenRow += "</tr><tr><td class='inv_space'></td>"

    for (var j of inventoryList[i][1]) {
        didFirstArg = false
        didSecondArg = false
        invenRow += "<td class='inv_item'>";
        if (j[0] == 0) {}
        else {
            invenRow += generate_row(j)
        };
        if (j[1] == 1) {}
        else {
            invenRow += "<span>"
            invenRow += j[1]
            invenRow += "</span>"
        };
        invenRow += "</td>"
    };
    invenRow += "</tr><tr style='height:5px;background-color:transparent;border:none'></tr>"
    invenRows += invenRow
};

var invenListEl = document.getElementById("player_inv");
invenListEl.innerHTML = invenRows